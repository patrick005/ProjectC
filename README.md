# 2025-03-23  
Create ProjectC repository.  
Create individual branches for each collaborator.  
Generate project structure based on the MVC model.  

## File Tree

ProjectC  
├── CMakeLists.txt  
├── LICENSE  
├── README.md  
├── include  
├── sql  
│   └── table.sql  
├── src  
│   └── main.c  
└── web  

---

### 데이터베이스 내 테이블 목록  

| Tables_in_UserInfo |  
|--------------------|  
| ID                 |  
| name               |  
| UserId             |  
| password           |  
| Email              |  


 ### 테이블의 속성 
| CalumName | Type     | Size | UNIQUEable | NULLable |  
|-----------|----------|------|------------|----------|  
| name      | varchar  | 50   |            | NOT NULL |  
| UserId    | varchar  | 50   | UNIQUE     | NOT NULL |  
| password  | varchar  | 255  |            | NOT NULL |  
| Email     | varchar  | 255  | UNIQUE     | NOT NULL |  
| etc       | -        | -    | -          | -        |  





                                   ┌─┐                                                                                                                                                                                                                                                                                                                    
                                   ║"│                                                                                                                                                                                                                                                                                                                    
                                   └┬┘                                                                                                                                                                                                                                                                                                                    
                                   ┌┼┐                                                                                                                                                                                                                                                                                                                    
                                    │             ┌──────────────────┐                                                      ┌────────┐           ┌────────────────┐             ┌───────────┐                       ┌───────────────┐                                   ┌──────────┐           ┌────────────────┐                                         
                                   ┌┴┐            │WeatherSender (PC)│                                                      │MySQL DB│           │Serial Port (PC)│             │Serial Link│                       │AVR (Atmega128)│                                   │LCD Module│           │Motor Controller│                                         
                                  User            └─────────┬────────┘                                                      └────┬───┘           └────────┬───────┘             └─────┬─────┘                       └───────┬───────┘                                   └─────┬────┘           └────────┬───────┘                                         
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │  ╔════════════════════════╧═════╗                               │                                                 │                         │                                                 
════════════════════════════════════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪══╣ WeatherSender Initialization ╠═══════════════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪═════════════════════════════════════════════════
                                    │                       │                                                                    │                        │  ╚════════════════════════╤═════╝                               │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │    Start Program      │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │──────────────────────>│                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │          mysql_real_connect(host, user, pass, db, port)            │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │───────────────────────────────────────────────────────────────────>│                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
          ╔══════╤══════════════════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪═══════════════════════════╪════════════════════╗                │                                                 │                         │                                                 
          ║ ALT  │  MySQL connection fails                  │                                                                    │                        │                           │                    ║                │                                                 │                         │                                                 
          ╟──────┘                  │                       │                                                                    │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │                           Error message                            │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │<─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │                                                                    │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │────┐                                                               │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │    │ Print error and exit                                          │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │<───┘                                                               │                        │                           │                    ║                │                                                 │                         │                                                 
          ╠═════════════════════════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪═══════════════════════════╪════════════════════╣                │                                                 │                         │                                                 
          ║ [MySQL connection succeeds]                     │                                                                    │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │────┐                                                               │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │    │ Continue                                                      │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │<───┘                                                               │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │                                                                    │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │                           open(SERIAL_PORT, O_WRONLY | O_NOCTTY)   │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │────────────────────────────────────────────────────────────────────────────────────────────>│                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │                                                                    │                        │                           │                    ║                │                                                 │                         │                                                 
          ║                         │                       │                                                                    │                        │                           │                    ║                │                                                 │                         │                                                 
          ║         ╔══════╤════════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪═══════════════════════════╪══════════╗         ║                │                                                 │                         │                                                 
          ║         ║ ALT  │  Serial Port open fails        │                                                                    │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ╟──────┘        │                       │                                                                    │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │                                       Error message                │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │<─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │                                                                    │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │────┐                                                               │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │    │ Print error and exit                                          │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │<───┘                                                               │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ╠═══════════════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪═══════════════════════════╪══════════╣         ║                │                                                 │                         │                                                 
          ║         ║ [Serial Port open succeeds]           │                                                                    │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │────┐                                                               │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │    │ Configure Serial Port                                         │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │<───┘ (tcgetattr, cfsetospeed, etc.)                                │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │                                                                    │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │                                                                    │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │mysql_query("SELECT wt FROM weatherData6 ORDER BY tm DESC LIMIT 1") │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │───────────────────────────────────────────────────────────────────>│                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │                                                                    │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║               │                       │                                                                    │                        │                           │          ║         ║                │                                                 │                         │                                                 
          ║         ║         ╔═════╪╤══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪═══════════════════════════╪╗         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║ ALT  │  Query fails         │                                                                    │                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ╟──────┘                      │                                                                    │                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │                       │                           Error message                            │                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │                       │<─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │                       │                                                                    │                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │                       │────┐                                                               │                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │                       │    │ Print error, mysql_close(), exit                              │                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │                       │<───┘                                                               │                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ╠═════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪═══════════════════════════╪╣         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║ [Query succeeds]            │                                                                    │                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │                       │                       mysql_store_result()                         │                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │                       │───────────────────────────────────────────────────────────────────>│                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │                       │                                                                    │                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │                       │                                                                    │                        │                           │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ╔══════╤════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪══════════════════╗        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║ ALT  │  Result set empty                                                               │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ╟──────┘            │                                                                    │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │                               NULL                                 │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │<─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─│                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │                                                                    │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │────┐                                                               │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │    │ Print "No weather data found", exit                           │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │<───┘                                                               │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ╠═══════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪══════════════════╣        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║ [Result exists]   │                                                                    │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │                         mysql_fetch_row()                          │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │<───────────────────────────────────────────────────────────────────│                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │                                                                    │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │────┐                                                               │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │    │ Clean string (                                                │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │<───┘ ,                                                             │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │       제거, 마지막에                                               │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │       추가)                                                        │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │                                                                    │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │                                                                    │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │                                write(serial, cleaned data)         │                        │                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ║                   │────────────────────────────────────────────────────────────────────────────────────────────>│                  ║        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ║     │   ╚═══════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪══════════════════╝        │║         ║         ║                │                                                 │                         │                                                 
          ║         ║         ╚═════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪═══════════════════════════╪╝         ║         ║                │                                                 │                         │                                                 
          ║         ╚═══════════════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪═══════════════════════════╪══════════╝         ║                │                                                 │                         │                                                 
          ╚═════════════════════════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪═══════════════════════════╪════════════════════╝                │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │      ╔════════════════════╧╗                                    │                                                 │                         │                                                 
════════════════════════════════════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪══════╣ Serial Transmission ╠════════════════════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪═════════════════════════════════════════════════
                                    │                       │                                                                    │                        │      ╚════════════════════╤╝                                    │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │Transmit weather code data │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │──────────────────────────>│                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │UART RX (Weather command 'W' + code) │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │────────────────────────────────────>│                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │     ╔═══════════════════╗ │                                     │                                                 │                         │                                                 
════════════════════════════════════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪════════════════════════╪═════╣ AVR: UART 수신 및 ╠리 ═══════════════════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪═════════════════════════════════════════════════
                                    │                       │                                                                    │                        │     ╚═══════════════════╝ │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │────┐                                            │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │    │ Check received char via UCSR0A             │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │<───┘                                            │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           ╔══════╤══════════════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪══════════════════════════════════════╗          
                                    │                       │                                                                    │                        │                           ║ ALT  │  Received char is 'W'        │                                                 │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ╟──────┘                              │                                                 │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │────┐                                            │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │    │ Wait for next char (weather code digit)    │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │<───┘                                            │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │                                                 │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │────┐                                            │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │    │ processWeatherCommand(weatherCode)         │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │<───┘                                            │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │                                                 │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │                 lcdGotoXY(0,0)                  │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │────────────────────────────────────────────────>│                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │                                                 │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │              lcdPrint(weatherStr)               │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │────────────────────────────────────────────────>│                         │                                      ║          
                                    │                       │                                                                    │                        │                           ╠═════════════════════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪══════════════════════════════════════╣          
                                    │                       │                                                                    │                        │                           ║ [Other UART command]                │                                                 │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │────┐                                            │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │    │ handleUARTCommand(input)                   │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │<───┘                                            │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │                                                 │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║                                     │                                                 │                         │                                      ║          
                                    │                       │                                                                    │                        │                           ║         ╔══════╤════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪════════════════════════════╗         ║          
                                    │                       │                                                                    │                        │                           ║         ║ ALT  │  Command 'l' or 'm'│                                                 │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ╟──────┘                    │                                                 │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │────┐                                            │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │    │ Change current_mode                        │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │<───┘                                            │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │                                                 │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │────┐                                            │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │    │ sendString("[MODE] ...")                   │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │<───┘                                            │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ╠═══════════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪════════════════════════════╣         ║          
                                    │                       │                                                                    │                        │                           ║         ║ [Command 'o' or 'c']      │                                                 │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │                                                 │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ╔══════╤══════════╪═════════════════════════════════════════════════╪═════════════════════════╪══════════════════╗         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║ ALT  │  Blind state change condition valid                        │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ╟──────┘          │                                                 │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │                       stepMotor(open/close steps)                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │──────────────────────────────────────────────────────────────────────────>│                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │                                                 │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │────┐                                            │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │    │ Update blind_state                         │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │<───┘                                            │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │                                                 │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │────┐                                            │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │    │ sendString("Blind OPENED/CLOSED")          │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │<───┘                                            │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ╠═════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪══════════════════╣         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │                                                 │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │────┐                                            │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │    │ Ignore (no state change)                   │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ║                 │<───┘                                            │                         │                  ║         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║         ╚═════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪══════════════════╝         ║         ║          
                                    │                       │                                                                    │                        │                           ║         ╠═══════════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪════════════════════════════╣         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │                                                 │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │────┐                                            │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │    │ sendString("[ERROR] Unknown command")      │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ║                           │<───┘                                            │                         │                            ║         ║          
                                    │                       │                                                                    │                        │                           ║         ╚═══════════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪════════════════════════════╝         ║          
                                    │                       │                                                                    │                        │                           ╚═════════════════════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪══════════════════════════════════════╝          
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                      ╔═╧═══════════════════════════╧══════════╗                          │                                                 │                         │                                                 
════════════════════════════════════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪══════════════════════╣ AVR: Light Sensor & Motor Control Loop ╠══════════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪═════════════════════════════════════════════════
                                    │                       │                                                                    │                      ╚═╤═══════════════════════════╤══════════╝                          │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │         ╔═══════╤═══════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪════════════════════════════╗                    
                                    │                       │                                                                    │                        │                           │         ║ LOOP  │  Continuous Main Loop (MODE_LIGHT_SENSOR)                           │                         │                            ║                    
                                    │                       │                                                                    │                        │                           │         ╟───────┘                   │                                                 │                         │                            ║                    
                                    │                       │                                                                    │                        │                           │         ║                           │────┐                                            │                         │                            ║                    
                                    │                       │                                                                    │                        │                           │         ║                           │    │ Read ADC for light sensor (readADC)        │                         │                            ║                    
                                    │                       │                                                                    │                        │                           │         ║                           │<───┘                                            │                         │                            ║                    
                                    │                       │                                                                    │                        │                           │         ║                           │                                                 │                         │                            ║                    
                                    │                       │                                                                    │                        │                           │         ║                           │                                                 │                         │                            ║                    
                                    │                       │                                                                    │                        │                           │         ║         ╔══════╤══════════╪═════════════════════════════════════════════════╪═════════════════════════╪══════════════════╗         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║ ALT  │  ADC > LIGHT_THRESHOLD_OPEN and blinds CLOSED              │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ╟──────┘          │                                                 │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │                       stepMotor(OPEN_STEPS, delay)                        │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │──────────────────────────────────────────────────────────────────────────>│                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │                                                 │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │────┐                                            │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │    │ Update blind_state to OPEN                 │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │<───┘                                            │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │                                                 │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │────┐                                            │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │    │ sendString("                               │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │<───┘                                            │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │      [LIGHT] Bright -> Blinds OPENED            │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │                                                 │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │      ")                                         │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │                                                 │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ╠═════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪══════════════════╣         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║ [ADC < LIGHT_THRESHOLD_CLOSE and blinds OPEN]                     │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │                      stepMotor(CLOSE_STEPS, delay)                        │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │──────────────────────────────────────────────────────────────────────────>│                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │                                                 │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │────┐                                            │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │    │ Update blind_state to CLOSED               │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │<───┘                                            │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │                                                 │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │────┐                                            │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │    │ sendString("                               │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │<───┘                                            │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │      [LIGHT] Dark -> Blinds CLOSED              │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │                                                 │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │      ")                                         │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ║                 │                                                 │                         │                  ║         ║                    
                                    │                       │                                                                    │                        │                           │         ║         ╚═════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪══════════════════╝         ║                    
                                    │                       │                                                                    │                        │                           │         ║                           │                                                 │                         │                            ║                    
                                    │                       │                                                                    │                        │                           │         ║                           │────┐                                            │                         │                            ║                    
                                    │                       │                                                                    │                        │                           │         ║                           │    │ _delay_ms(100)                             │                         │                            ║                    
                                    │                       │                                                                    │                        │                           │         ║                           │<───┘                                            │                         │                            ║                    
                                    │                       │                                                                    │                        │                           │         ╚═══════════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪════════════════════════════╝                    
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                 ╔══════╧═══════════════════════════╧════════════╗                        │                                                 │                         │                                                 
════════════════════════════════════╪═══════════════════════╪════════════════════════════════════════════════════════════════════╪═════════════════╣ AVR: Timer Interrupt Service Routine (LED 제어╠ ═══════════════════════╪═════════════════════════════════════════════════╪═════════════════════════╪═════════════════════════════════════════════════
                                    │                       │                                                                    │                 ╚══════╤═══════════════════════════╤════════════╝                        │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │────┐                                            │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │    │ TIMER1_COMPA_vect ISR triggered            │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │<───┘                                            │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │────┐                                            │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │    │ Read ADC for LED (readADC for CDS_PIN_LED) │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │<───┘                                            │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                                     │                                                 │                         │                                                 
                                    │                       │                                                                    │                        │                           │                   ╔══════╤══════════╪═══════════════════════════════════════╗         │                         │                                                 
                                    │                       │                                                                    │                        │                           │                   ║ ALT  │  PIR 상태와 ADC 조건에 따라                      ║         │                         │                                                 
                                    │                       │                                                                    │                        │                           │                   ╟──────┘          │                                       ║         │                         │                                                 
                                    │                       │                                                                    │                        │                           │                   ║                 │────┐                                  ║         │                         │                                                 
                                    │                       │                                                                    │                        │                           │                   ║                 │    │ Adjust PORTA for LED control     ║         │                         │                                                 
                                    │                       │                                                                    │                        │                           │                   ║                 │<───┘ (timer1count 관리)               ║         │                         │                                                 
                                    │                       │                                                                    │                        │                           │                   ║                 │                                       ║         │                         │                                                 
                                    │                       │                                                                    │                        │                           │                   ╚═════════════════╪═══════════════════════════════════════╝         │                         │                                                 
                                  User            ┌─────────┴────────┐                                                      ┌────┴───┐           ┌────────┴───────┐             ┌─────┴─────┐                       ┌───────┴───────┐                                   ┌─────┴────┐           ┌────────┴───────┐                                         
                                   ┌─┐            │WeatherSender (PC)│                                                      │MySQL DB│           │Serial Port (PC)│             │Serial Link│                       │AVR (Atmega128)│                                   │LCD Module│           │Motor Controller│                                         
                                   ║"│            └──────────────────┘                                                      └────────┘           └────────────────┘             └───────────┘                       └───────────────┘                                   └──────────┘           └────────────────┘                                         
                                   └┬┘                                                                                                                                                                                                                                                                                                                    
                                   ┌┼┐                                                                                                                                                                                                                                                                                                                    
                                    │                                                                                                                                                                                                                                                                                                                     
                                   ┌┴┐                                                                                                                                                                                                                                                                                                                    


